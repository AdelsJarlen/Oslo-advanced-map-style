---
title: Vorschau der
layout: map
---

<script src="{{ 'javascript/leaflet.ajax.min.js' | relative_url }}"></script> <!-- https://github.com/calvinmetcalf/leaflet-ajax -->

<script>
	var options = {
		center: [52.48150, 13.43571],
		zoom: 18,
		minZoom: 15,
		zoomControl: true,
		maxBounds: [[52.4557, 13.3985], [52.5005, 13.4863]]
	}

	var map = L.map("map", options);

	var parkingmap = L.tileLayer("https://supaplex.uber.space/micromap/tiles/parkingmap/{z}/{x}/{y}.jpg", {
		name: 'parkingmap',
		maxZoom: 19,
		attribution: '© <a href="http://www.openstreetmap.org/copyright">OpenStreetMap-Mitwirkende</a>, Bordsteinkanten: OpenStreetMap und Geoportal Berlin / ALKIS.'
	})

	var micromap = L.tileLayer("https://supaplex.uber.space/micromap/tiles/{z}/{x}/{y}.jpg", {
		name: 'micromap',
		maxZoom: 20,
		attribution: '© <a href="http://www.openstreetmap.org/copyright">OpenStreetMap-Mitwirkende</a>, Bordsteinkanten: OpenStreetMap und Geoportal Berlin / ALKIS.'
	});
	micromap.addTo(map);   // This is the initial basemap

	var osm = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
		name: 'osm',
		maxZoom: 19,
		attribution: '© <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
	});
	// name set of tilelayers and adds them to the layer-selector
	var baseMaps = {
		"Parkraumkarte": parkingmap,
		"Straßenraumkarte": micromap,
		"OpenStreetMap": osm
	};

	const geoJsonFeaturePopup = function (feature, layer) {
		text = Object.keys(feature.properties).map( key => {
			let line_addon = ''
			switch (key) {
			case 'orientation':
				line_addon = `<img height="15" src="../images/legend/street_parking/${feature.properties["orientation"]}.png" />`
			}
			return `<li>${key}: ${feature.properties[key]} ${line_addon}</li>`;
		})
		layer.bindPopup(`<strong>Attribute:</strong><ul>${text.join('')}</ul>`);
	}
	var geojsonLayerParkingWay = new L.GeoJSON.AJAX("{{ 'data/parking_way.geojson' | absolute_url }}", {
		onEachFeature: function (feature, layer) { geoJsonFeaturePopup(feature, layer) }
	});
	geojsonLayerParkingWay.addTo(map);

	var geojsonLayerParkingArea = new L.GeoJSON.AJAX("{{ 'data/parking_area.geojson' | absolute_url }}", {
		onEachFeature: function (feature, layer) { geoJsonFeaturePopup(feature, layer) }
	});

	var geojsonLayerLaneArea = new L.GeoJSON.AJAX("{{ 'data/lane_area.geojson' | absolute_url }}");

	var geojsonLayerTrafficArea = new L.GeoJSON.AJAX("{{ 'data/traffic_area.geojson' | absolute_url }}");

	var geojsonLayerKfzPoints = new L.GeoJSON.AJAX("");

	var geojsonLayerKfzLorPlanungsraum = new L.GeoJSON.AJAX("{{ 'data/kfz_lor_planungsraum.geojson' | absolute_url }}", {
		onEachFeature: function (feature, layer) { geoJsonFeaturePopup(feature, layer) }
	});

	var overlayMaps = {
		"parking_way.geojson": geojsonLayerParkingWay,
		"parking_area.geojson": geojsonLayerParkingArea,
		"lane_area.geojson": geojsonLayerLaneArea,
		"traffic_area.geojson": geojsonLayerTrafficArea,
		"<del>kfz_points.geojson</del> <span class='text-muted'>Datei zu groß</span>": geojsonLayerKfzPoints,
		"kfz_lor_planungsraum.geojson": geojsonLayerKfzLorPlanungsraum
	};

	L.control.layers(baseMaps, overlayMaps, { collapsed: false }).addTo(map);

	var hash = new L.Hash(map, baseMaps);

</script>
